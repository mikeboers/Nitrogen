It appears that all http headers (at least those that Firefox is sending) are
being sent through into the environ. The keys are prefixes with 'HTTP_', all
dashes converted to underscores, and all uppercase. For example:
    If-None-Match -> HTTP_IF_NONE_MATCH

It appears the most headers should only ever be sent once. The notable exception
is Set-Cookie, which is sent for every cookie.

A good class for handling headers is the wsgiref.headers.Header class. It does
everything that I need it to.

Be careful when naming custom functions that are injected into the WSGI stack.
Having a dozen "inner" functions or "inner_start" is incredibly unhelpful in
a traceback.